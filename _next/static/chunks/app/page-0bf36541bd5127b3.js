(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{5311:function(e,t,s){Promise.resolve().then(s.bind(s,6774))},6774:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return i}});var n,r,l=s(7437),c=s(2265);(n=r||(r={}))[n.E=0]="E",n[n.A=1]="A",n[n.D=2]="D",n[n.G=3]="G",n[n.B=4]="B",n[n.e=5]="e";let a=c.memo(e=>{let{selectedString:t,setSelectedString:s}=e,n="bg-muted rounded-full w-12 h-12 flex items-center justify-center text-sm font-medium text-muted-foreground hover:bg-accent hover:text-accent-foreground focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 cursor-pointer",a=c.memo(e=>{let{gs:c}=e,a=t===c;return(0,l.jsxs)("label",{className:a?n+" bg-accent":n,children:[(0,l.jsx)("input",{type:"radio",name:"selectedString",value:r[c],className:"peer sr-only",checked:a,onChange:()=>s(c)}),r[c]]})});return(0,l.jsxs)("div",{className:"grid grid-cols-6 gap-2",children:[(0,l.jsx)(a,{gs:0}),(0,l.jsx)(a,{gs:1}),(0,l.jsx)(a,{gs:2}),(0,l.jsx)(a,{gs:3}),(0,l.jsx)(a,{gs:4}),(0,l.jsx)(a,{gs:5})]})});function i(){let e=(0,c.useRef)(null),[t,s]=(0,c.useState)(null),[n,i]=(0,c.useState)(0),[u,o]=(0,c.useState)(),[d,f]=(0,c.useState)(),[m,x]=(0,c.useState)(0),[h,g]=(0,c.useState)(0),j=(0,c.useRef)(0),[b,v]=(0,c.useState)(0),w=(0,c.useRef)(0),p=(0,c.useCallback)(()=>{if(null==u||!d||!t)return;let s=e.current;if(!s)return;let n=s.getContext("2d");if(!n)return;u.getByteFrequencyData(d);let{width:r,height:l}=s;n.clearRect(0,0,r,l);let c=S(N.current),a=Math.floor(u.frequencyBinCount*(.5*c)/m),i=Math.floor(u.frequencyBinCount*(1.5*c)/m),o=s.clientWidth/i*2.5,f=0,x=0,h=0;for(let e=a;e<i;e++){let t=d[e];t>x&&(x=t,h=e);let r=e/d.length*360;n.fillStyle="hsl(".concat(r,", 100%, 50%)"),n.fillRect(f,s.height-t/2,o,t),f+=o}if(d.reduce((e,t)=>e+t,0)/d.length>2){let e=(h+a)*m/16384,t=.9*j.current+.09999999999999998*e;j.current=t,g(t),Math.abs(t-c)<Math.abs(w.current-c)&&(w.current=t,v(w.current))}else j.current=0,w.current=0,g(0),v(0);null!=t&&t.active&&requestAnimationFrame(p)},[u,d,m,t]),N=(0,c.useRef)(n);(0,c.useEffect)(()=>{N.current=n},[n]),(0,c.useEffect)(()=>{j.current=h},[h]),(0,c.useEffect)(()=>{u&&d&&t&&p()},[u,d,p,t,n]);let y="rounded-full w-20 h-20 flex items-center justify-center text-primary-foreground hover:bg-primary/90";return null!=t?y+=" bg-accent":y+=" bg-primary",(0,l.jsxs)("div",{className:"flex flex-col h-screen bg-background",children:[(0,l.jsx)("header",{className:"sticky top-0 z-10 bg-background shadow-sm",children:(0,l.jsx)("div",{className:"flex items-center justify-between px-4 py-3",children:(0,l.jsx)("h1",{className:"text-xl font-bold",children:"Guitar Tuner"})})}),(0,l.jsx)("main",{className:"flex-1 flex flex-col px-4 py-8 items-center",children:(0,l.jsx)("div",{className:"w-full max-w-md",children:(0,l.jsxs)("div",{className:"mb-8",children:[(0,l.jsx)("h2",{className:"text-2xl font-bold mb-2",children:"Select String"}),(0,l.jsx)(a,{selectedString:n,setSelectedString:i}),(0,l.jsxs)("div",{className:"mb-8",children:[(0,l.jsx)("h2",{className:"text-2xl font-bold mb-2",children:"Tune String"}),(0,l.jsxs)("div",{className:"relative w-full h-64 bg-muted rounded-lg overflow-hidden",children:[(0,l.jsx)("canvas",{ref:e,className:"w-full h-full"}),(0,l.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,l.jsx)("button",{className:y,onClick:()=>{null!=t?(null!=t&&t.getTracks().forEach(e=>{e.stop()}),s(null)):navigator.mediaDevices.getUserMedia({audio:!0}).then(e=>{s(e);let t=new(window.AudioContext||window.webkitAudioContext),n=t.sampleRate;x(n),console.log("Streaming started"),console.log("Sample Rate:",n,"Hz");let r=t.createAnalyser();r.smoothingTimeConstant=.85,r.fftSize=16384,f(new Uint8Array(r.frequencyBinCount)),t.createMediaStreamSource(e).connect(r),o(r)}).catch(e=>{console.error("Error accessing the microphone: ",e)})},children:(0,l.jsx)(function(e){return(0,l.jsxs)("svg",{...e,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,l.jsx)("path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z"}),(0,l.jsx)("path",{d:"M19 10v2a7 7 0 0 1-14 0v-2"}),(0,l.jsx)("line",{x1:"12",x2:"12",y1:"19",y2:"22"})]})},{className:"w-8 h-8"})})}),(0,l.jsx)("div",{className:"absolute bottom-0 left-0 w-full h-16 bg-gradient-to-t from-background to-transparent"}),(0,l.jsxs)("div",{className:"absolute bottom-4 left-4 right-4 text-sm font-medium text-muted-foreground flex flex-row justify-between",children:[(0,l.jsx)("span",{children:r[n]+" "+S(n)+" Hz"}),(0,l.jsx)("span",{className:"ml-auto",children:b.toFixed(2)})]})]})]})]})})}),(0,l.jsx)("footer",{className:"bg-muted py-4",children:(0,l.jsx)("div",{className:"container mx-auto flex justify-center"})})]});function S(e){switch(e){case 0:return 82.41;case 1:return 110;case 2:return 146.83;case 3:return 196;case 4:return 246.94;case 5:return 329.63;default:return 0}}}}},function(e){e.O(0,[971,23,744],function(){return e(e.s=5311)}),_N_E=e.O()}]);